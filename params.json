{"tagline":"","note":"Don't delete this file! It's used internally to help with page regeneration.","name":"fedora-openstack","body":"This organisation is used to group repositories related to the management of the OpenStack packages in Fedora. The repositories named openstack-* contain the packaging files related to the trunk tracking [smokestack](http://smokestack.openstack.org/about) project. The rest are forks of the OpenStack projects themselves, allow us to use git to manipulate the changes, with the patches within the packages being automatically generated from the git repositories.\r\n\r\nFollowing are the steps to use this workflow:\r\n\r\n## New fedora-openstack project setup\r\n* Fork $project to fedora-openstack org\r\n* `fedpkg clone openstack-$project && cd openstack-$project`\r\n* `git remote add -f fedora-openstack git@github.com:fedora-openstack/$project.git`\r\n* `git checkout fedora-openstack/master`\r\n* `git checkout -b master-patches` # New local branch\r\n* `git push --set-upstream fedora-openstack master-patches` # New upstream branch\r\n* On github set master-patches branch to default\r\n* `git push fedora-openstack :master` # Delete upstream master branch (and any other unneeded branches)\r\n\r\n## setup local repo for a $project (if someone else set it up on github)\r\n\r\n* `fedpkg clone openstack-$project && cd openstack-$project`\r\n* `git remote add -f fedora-openstack git@github.com:fedora-openstack/$project.git`\r\n* `git branch master-patches fedora-openstack/master-patches`\r\n\r\n## finish setup of local repo\r\n\r\n* `git remote add -f openstack git://github.com/openstack/$project.git`\r\n* `git remote add -f fedora-smokestack git@github.com:fedora-openstack/openstack-$project.git`\r\n* `wget https://raw.github.com/fedora-openstack/fedora-openstack.github.com/master/update-patches.sh`\r\n\r\n\r\n***\r\nSo the above steps are only needed once to setup your local repo.\r\nThe following are needed each time you want to update the Fedora package:\r\n\r\n## Patch set update process\r\n### Ensure all repos are up to date locally:\r\n* `git fetch --all`\r\n\r\n### Rebase Fedora specific patches on top of the OpenStack tree:\r\n* `git checkout master-patches`\r\n* `git log --oneline` # Identify hash of commit before first commit to consider rebasing\r\n\r\nYou can either rebase the patch branch onto a branch:\r\n* `git rebase --onto remotes/openstack/stable/$release $hash`\r\nor a tag:\r\n* `git rebase --onto $tag $hash`\r\n\r\nUse the --interactive rebase option if want to edit/delete commits etc.\r\nAlso you can `git cherry-pick` other patches from remotes/openstack/master for example,\r\nor directly from gerrit by copy and pasting the cherry-pick commands from there.\r\n\r\n### Update the patches on master\r\n* `git checkout master`\r\n* `./update-patches.sh`\r\n\r\n### Update changelog and version in spec file as appropriate and push to the fedora repo\r\n* `git commit --amend -a`\r\n* `git push`\r\n\r\n### Push updated master-patches back to fedora-openstack. I.E. to github so everyone is synced.\r\n* `git push fedora-openstack +master-patches`\r\nNote the + above, which will force sync (so there needs to be a little coordination between packagers)\r\n\r\nNote a separate branch is not maintained on github until needed.\r\nI.E. just `git merge` fedora branches where appropriate.","google":""}